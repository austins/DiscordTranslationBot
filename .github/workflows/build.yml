name: Build

on:
    pull_request:
        branches: [ master ]

jobs:
    test:
        uses: ./.github/workflows/test.yml
    automerge:
        if: ${{ github.actor == 'dependabot[bot]' }}
        needs: test
        runs-on: ubuntu-latest
        permissions:
            pull-requests: write
            contents: write
        steps:
            -   name: Automerge
                uses: fastify/github-action-merge-dependabot@v3
                with:
                    target: 'minor'
                    use-github-auto-merge: true
